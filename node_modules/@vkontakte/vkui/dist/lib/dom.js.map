{"version":3,"sources":["../../src/lib/dom.tsx"],"names":["createContext","useContext","canUseDOM","canUseEventListeners","onDOMLoaded","getDOM","window","document","DOMContext","useDOM","dom","withDOM","Component","WithDOM","props","blurActiveElement","activeElement","blur"],"mappings":";;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAA6D,OAA7D;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASA,SAAT,EAAoBC,oBAApB,EAA0CC,WAA1C,QAA6D,iBAA7D;AAeA,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAS;AAAA,SAAO;AAC3BC,IAAAA,MAAM,EAAEJ,SAAS,GAAGI,MAAH,GAAY,IADF;AAE3BC,IAAAA,QAAQ,EAAEL,SAAS,GAAGK,QAAH,GAAc;AAFN,GAAP;AAAA,CAAf;AAKP,OAAO,IAAMC,UAAU,gBAAGR,aAAa,CAAsBK,MAAM,EAA5B,CAAhC;AAEP,OAAO,IAAMI,MAAM,GAAG,SAATA,MAAS,GAAM;AAC1B,MAAMC,GAAG,GAAGT,UAAU,CAACO,UAAD,CAAtB;AACA,SAAO;AACLF,IAAAA,MAAM,EAAEI,GAAG,CAACJ,MAAJ,KAAeJ,SAAS,GAAGI,MAAH,GAAY,IAApC,CADH;AAELC,IAAAA,QAAQ,EAAEG,GAAG,CAACH,QAAJ,KAAiBL,SAAS,GAAGK,QAAH,GAAc,IAAxC;AAFL,GAAP;AAID,CANM;AAQP,OAAO,SAASI,OAAT,CAAwBC,SAAxB,EAAoE;AACzE,MAAMC,OAAkB,GAAG,SAArBA,OAAqB,CAACC,KAAD,EAAkB;AAC3C,QAAMJ,GAAG,GAAGD,MAAM,EAAlB;AACA,WAAO,oBAAC,SAAD,eAAeK,KAAf,EAA0BJ,GAA1B,EAAP;AACD,GAHD;;AAIA,SAAOG,OAAP;AACD;AAED,OAAO,SAASE,iBAAT,CAA2BR,QAA3B,EAA2D;AAChE,MAAIA,QAAQ,IAAIA,QAAQ,CAACS,aAAzB,EAAwC;AACrCT,IAAAA,QAAQ,CAACS,aAAV,CAAwCC,IAAxC;AACD;AACF","sourcesContent":["import { createContext, useContext, ComponentType, FC } from 'react';\nimport { canUseDOM } from '@vkontakte/vkjs';\nexport { canUseDOM, canUseEventListeners, onDOMLoaded } from '@vkontakte/vkjs';\n\nexport interface DOMContextInterface {\n  /**\n   * @ignore\n   */\n  window?: Window;\n  /**\n   * @ignore\n   */\n  document?: Document;\n}\n\nexport type DOMProps = DOMContextInterface;\n\nexport const getDOM = () => ({\n  window: canUseDOM ? window : null,\n  document: canUseDOM ? document : null,\n});\n\nexport const DOMContext = createContext<DOMContextInterface>(getDOM());\n\nexport const useDOM = () => {\n  const dom = useContext(DOMContext);\n  return {\n    window: dom.window || (canUseDOM ? window : null),\n    document: dom.document || (canUseDOM ? document : null),\n  };\n};\n\nexport function withDOM<Props>(Component: ComponentType<Props & DOMProps>) {\n  const WithDOM: FC<Props> = (props: Props) => {\n    const dom = useDOM();\n    return <Component {...props} {...dom} />;\n  };\n  return WithDOM;\n}\n\nexport function blurActiveElement(document: Document | undefined) {\n  if (document && document.activeElement) {\n    (document.activeElement as HTMLElement).blur();\n  }\n}\n"],"file":"dom.js"}