{"version":3,"sources":["../../../src/components/ChipsInput/useChipsInput.ts"],"names":["useCallback","useEffect","useState","useChipsInput","props","value","getOptionValue","onChange","onInputChange","getNewOptionData","inputValue","fieldValue","setFieldValue","selectedOptions","setSelectedOptions","clearInput","target","handleInputChange","e","toggleOption","newOption","newSelectedOptions","filter","option","push","addOption","addOptionFromInput","trimmedValue","trim","undefined","removeOption"],"mappings":"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","sourcesContent":["import { ChangeEvent, useCallback, useEffect, useState } from 'react';\nimport { ChipsInputOption, ChipsInputProps, ChipsInputValue } from './ChipsInput';\n\nexport const useChipsInput = <Option extends ChipsInputOption>(props: Partial<ChipsInputProps<Option>>) => {\n  const { value, getOptionValue, onChange, onInputChange, getNewOptionData } = props;\n\n  const [fieldValue, setFieldValue] = useState(props.inputValue);\n  const [selectedOptions, setSelectedOptions] = useState(value);\n\n  const clearInput = useCallback(() => {\n    setFieldValue('');\n    onInputChange({ target: { value: '' } } as any);\n  }, [onInputChange]);\n\n  const handleInputChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setFieldValue(e.target.value);\n    onInputChange(e);\n  }, [onInputChange]);\n\n  const toggleOption = useCallback((newOption: Option, value?: boolean) => {\n    const newSelectedOptions = selectedOptions.filter((option: Option) => getOptionValue(newOption) !== getOptionValue(option));\n\n    if (value === true) {\n      newSelectedOptions.push(newOption);\n    }\n\n    setSelectedOptions(newSelectedOptions);\n    onChange(newSelectedOptions);\n  }, [selectedOptions, getOptionValue, onChange]);\n\n  const addOption = useCallback((newOption: Option) => toggleOption(newOption, true), [toggleOption]);\n  const addOptionFromInput = useCallback(() => {\n    const trimmedValue = fieldValue?.trim();\n\n    if (trimmedValue) {\n      addOption(getNewOptionData(undefined, trimmedValue));\n      clearInput();\n    }\n  }, [addOption, clearInput, getNewOptionData, fieldValue]);\n  const removeOption = useCallback((value: ChipsInputValue) => {\n    toggleOption(getNewOptionData(undefined, value as string), false);\n  }, [toggleOption, getNewOptionData]);\n\n  useEffect(() => {\n    setSelectedOptions(value);\n\n    return () => setSelectedOptions([]);\n  }, [props.value]);\n\n  useEffect(() => {\n    setFieldValue(props.inputValue);\n\n    return () => setFieldValue('');\n  }, [props.inputValue]);\n\n  return { fieldValue, setFieldValue, selectedOptions, setSelectedOptions, clearInput, toggleOption, addOption, addOptionFromInput, removeOption, handleInputChange };\n};\n"],"file":"useChipsInput.js"}