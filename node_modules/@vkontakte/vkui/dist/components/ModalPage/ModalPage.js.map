{"version":3,"sources":["../../../src/components/ModalPage/ModalPage.tsx"],"names":["useContext","useEffect","getClassName","classNames","ModalRootContext","useModalRegistry","usePlatform","withAdaptivity","ViewHeight","ViewWidth","ModalDismissButton","multiRef","ModalType","getNavId","warnOnce","warn","ModalPage","props","platform","updateModalHeight","children","header","viewWidth","viewHeight","sizeX","hasMouse","onClose","settlingHeight","dynamicContentHeight","getModalContentRef","nav","restProps","isDesktop","SMALL_TABLET","MEDIUM","canShowCloseBtn","modalContext","PAGE","refs","innerElement","headerElement","contentElement","defaultProps"],"mappings":"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","sourcesContent":["import { FC, HTMLAttributes, ReactNode, useContext, useEffect } from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { ModalRootContext, useModalRegistry } from '../ModalRoot/ModalRootContext';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { withAdaptivity, AdaptivityProps, ViewHeight, ViewWidth } from '../../hoc/withAdaptivity';\nimport ModalDismissButton from '../ModalDismissButton/ModalDismissButton';\nimport { Ref } from '../../types';\nimport { multiRef } from '../../lib/utils';\nimport { ModalType } from '../ModalRoot/types';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\n\nexport interface ModalPageProps extends HTMLAttributes<HTMLDivElement>, AdaptivityProps, NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: ReactNode;\n  onClose?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: Ref<HTMLDivElement>;\n}\n\nconst warn = warnOnce('ModalPage');\nconst ModalPage: FC<ModalPageProps> = (props: ModalPageProps) => {\n  const platform = usePlatform();\n  const { updateModalHeight } = useContext(ModalRootContext);\n  const {\n    children,\n    header,\n    viewWidth,\n    viewHeight,\n    sizeX,\n    hasMouse,\n    onClose,\n    settlingHeight,\n    dynamicContentHeight,\n    getModalContentRef,\n    nav,\n    ...restProps\n  } = props;\n\n  useEffect(() => {\n    updateModalHeight();\n  }, [children]);\n\n  const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET && (hasMouse || viewHeight >= ViewHeight.MEDIUM);\n  const canShowCloseBtn = viewWidth >= ViewWidth.SMALL_TABLET;\n\n  const modalContext = useContext(ModalRootContext);\n  const { refs } = useModalRegistry(getNavId(props, warn), ModalType.PAGE);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(getClassName('ModalPage', platform), `ModalPage--sizeX-${sizeX}`, {\n        'ModalPage--desktop': isDesktop,\n      })}\n    >\n      <div vkuiClass=\"ModalPage__in-wrap\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalPage__in\">\n          <div vkuiClass=\"ModalPage__header\" ref={refs.headerElement}>\n            {header}\n          </div>\n\n          <div vkuiClass=\"ModalPage__content-wrap\">\n            <div vkuiClass=\"ModalPage__content\" ref={multiRef<HTMLDivElement>(refs.contentElement, getModalContentRef)}>\n              <div vkuiClass=\"ModalPage__content-in\">\n                {children}\n              </div>\n            </div>\n          </div>\n          {canShowCloseBtn && <ModalDismissButton onClick={onClose || modalContext.onClose} />}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nModalPage.defaultProps = {\n  settlingHeight: 75,\n};\n\nexport default withAdaptivity(ModalPage, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true,\n});\n"],"file":"ModalPage.js"}