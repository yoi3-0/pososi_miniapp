"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useTimeout = useTimeout;

var _react = require("react");

var _useIsomorphicLayoutEffect = require("../lib/useIsomorphicLayoutEffect");

var _dom = require("../lib/dom");

function useTimeout(cb, duration) {
  var options = (0, _react.useRef)({
    cb: cb,
    duration: duration
  });
  (0, _useIsomorphicLayoutEffect.useIsomorphicLayoutEffect)(function () {
    options.current.cb = cb;
    options.current.duration = duration;
  }, [cb, duration]);
  var timeout = (0, _react.useRef)();
  var clear = (0, _react.useCallback)(function () {
    return _dom.canUseDOM && clearTimeout(timeout.current);
  }, []);
  var set = (0, _react.useCallback)(function () {
    clear();

    if (_dom.canUseDOM) {
      timeout.current = setTimeout(function () {
        var cb = options.current.cb;
        typeof cb === 'function' && cb();
      }, options.current.duration);
    }
  }, []);
  (0, _react.useEffect)(function () {
    return clear;
  }, []);
  return {
    set: set,
    clear: clear
  };
}
//# sourceMappingURL=useTimeout.js.map