"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Panel = void 0;

var _jsxRuntime = require("../../lib/jsxRuntime");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = require("react");

var _getClassName = require("../../helpers/getClassName");

var _classNames2 = require("../../lib/classNames");

var _Touch = _interopRequireDefault(require("../Touch/Touch"));

var _TooltipContainer = require("../Tooltip/TooltipContainer");

var _withAdaptivity = require("../../hoc/withAdaptivity");

var _PanelContext = require("./PanelContext");

var _platform = require("../../lib/platform");

var _usePlatform = require("../../hooks/usePlatform");

var _getNavId = require("../../lib/getNavId");

var _useExternRef = require("../../hooks/useExternRef");

var _warnOnce = require("../../lib/warnOnce");

var warn = (0, _warnOnce.warnOnce)('Panel');

var PanelComponent = function PanelComponent(props) {
  var centered = props.centered,
      children = props.children,
      getRootRef = props.getRootRef,
      sizeX = props.sizeX,
      nav = props.nav,
      restProps = (0, _objectWithoutProperties2.default)(props, ["centered", "children", "getRootRef", "sizeX", "nav"]);
  var platform = (0, _usePlatform.usePlatform)();
  var containerRef = (0, _useExternRef.useExternRef)(getRootRef);
  var navId = (0, _getNavId.getNavId)(props, warn);
  var childContext = (0, _react.useMemo)(function () {
    return {
      panel: navId,
      getPanelNode: function getPanelNode() {
        return containerRef.current;
      }
    };
  }, [navId]);
  return (0, _jsxRuntime.createScopedElement)(_PanelContext.PanelContext.Provider, {
    value: childContext
  }, (0, _jsxRuntime.createScopedElement)("div", (0, _extends2.default)({}, restProps, {
    ref: containerRef,
    vkuiClass: (0, _classNames2.classNames)((0, _getClassName.getClassName)('Panel', platform), "Panel--".concat(sizeX), (0, _defineProperty2.default)({
      'Panel--centered': centered
    }, "Panel--sizeX-".concat(sizeX), true))
  }), (0, _jsxRuntime.createScopedElement)(_Touch.default, {
    Component: _TooltipContainer.TooltipContainer,
    vkuiClass: "Panel__in"
  }, platform === _platform.IOS && (0, _jsxRuntime.createScopedElement)("div", {
    vkuiClass: "Panel__fade"
  }), (0, _jsxRuntime.createScopedElement)("div", {
    vkuiClass: "Panel__in-before"
  }), centered ? (0, _jsxRuntime.createScopedElement)("div", {
    vkuiClass: "Panel__centered"
  }, children) : children, (0, _jsxRuntime.createScopedElement)("div", {
    vkuiClass: "Panel__in-after"
  }))));
};

PanelComponent.displayName = 'Panel';
PanelComponent.defaultProps = {
  children: '',
  centered: false
};
var Panel = (0, _withAdaptivity.withAdaptivity)(PanelComponent, {
  sizeX: true
});
exports.Panel = Panel;
//# sourceMappingURL=Panel.js.map