{"version":3,"sources":["../../../../src/components/SliderSwitch/SliderSwitch.tsx"],"names":["SliderSwitch","props","value","onSwitch","setState","activeValue","options","hoveredOptionId","event","key","preventDefault","state","find","option","firstButton","current","focus","secondButton","name","_activeValue","restProps","firstOption","secondOption","firstActive","secondActive","switchByKey","resetFocusedOption","handleFirstClick","handleFirstHover","handleSecondClick","handleSecondHover","nextProps","prevState","React","Component"],"mappings":"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","sourcesContent":["import React, { HTMLAttributes, KeyboardEvent, RefObject, createRef } from 'react';\nimport SliderSwitchButton from './SliderSwitchButton';\nimport { classNames } from '../../lib/classNames';\nimport { HasPlatform } from '../../types';\n\nexport interface SliderSwitchOptionInterface {\n  name: string;\n  value: string | number;\n}\n\nexport interface SliderSwitchProps extends HTMLAttributes<HTMLDivElement>, HasPlatform {\n  options: Array<{\n    name: string;\n    value: string | number;\n  }>;\n  activeValue?: SliderSwitchOptionInterface['value'];\n  name?: string;\n  onSwitch?: (value: SliderSwitchOptionInterface['value']) => void;\n}\n\ninterface SliderSwitchState {\n  activeValue: SliderSwitchOptionInterface['value'];\n  hoveredOptionId: number;\n}\n\nexport default class SliderSwitch extends React.Component<SliderSwitchProps, SliderSwitchState> {\n  public constructor(props: SliderSwitchProps) {\n    super(props);\n\n    this.state = {\n      activeValue: props.activeValue ?? '',\n      hoveredOptionId: -1,\n    };\n\n    this.firstButton = createRef();\n    this.secondButton = createRef();\n  }\n\n  static defaultProps = {\n    options: [{ name: '', value: '' }, { name: '', value: '' }],\n  };\n\n  firstButton: RefObject<HTMLDivElement>;\n  secondButton: RefObject<HTMLDivElement>;\n\n  onSwitch = (value: SliderSwitchOptionInterface['value']) => {\n    const { onSwitch } = this.props;\n\n    this.setState(() => ({\n      activeValue: value,\n    }), () => {\n      onSwitch && onSwitch(value);\n    });\n  };\n\n  handleFirstClick = () => {\n    const { options } = this.props;\n    const { value } = options[0];\n\n    this.onSwitch(value);\n  };\n\n  handleSecondClick = () => {\n    const { options } = this.props;\n    const { value } = options[1];\n\n    this.onSwitch(value);\n  };\n\n  handleFirstHover = () => {\n    this.setState(() =>({\n      hoveredOptionId: 0,\n    }));\n  };\n\n  handleSecondHover = () => {\n    this.setState(() =>({\n      hoveredOptionId: 1,\n    }));\n  };\n\n  resetFocusedOption = () => {\n    this.setState(() => ({\n      hoveredOptionId: -1,\n    }));\n  };\n\n  switchByKey = (event: KeyboardEvent) => {\n    if (event.key !== 'Enter' && event.key !== 'Spacebar' && event.key !== ' ') {\n      return;\n    }\n    event.preventDefault();\n\n    const { options } = this.props;\n    const { activeValue } = this.state;\n    const { value } = options.find((option) => option.value !== activeValue);\n\n    this.onSwitch(value);\n\n    if (options[0].value === value) {\n      this.firstButton.current.focus();\n    } else {\n      this.secondButton.current.focus();\n    }\n  };\n\n  static getDerivedStateFromProps(nextProps: SliderSwitchProps, prevState: SliderSwitchState) {\n    if (nextProps.activeValue && nextProps.activeValue !== prevState.activeValue) {\n      return {\n        activeValue: nextProps.activeValue,\n      };\n    }\n\n    return null;\n  }\n\n  public render() {\n    const { name, options, activeValue: _activeValue, onSwitch, ...restProps } = this.props;\n    const { activeValue, hoveredOptionId } = this.state;\n\n    const [firstOption, secondOption] = options;\n    const firstActive = firstOption.value === activeValue;\n    const secondActive = secondOption.value === activeValue;\n\n    return (\n      <div\n        {...restProps}\n        vkuiClass=\"SliderSwitch\"\n        onKeyDown={this.switchByKey}\n        onMouseLeave={this.resetFocusedOption}\n      >\n        {!firstActive && !secondActive &&\n          <div vkuiClass=\"SliderSwitch__border\" />\n        }\n        <div vkuiClass={classNames(\n          'SliderSwitch__slider',\n          {\n            ['SliderSwitch--firstActive']: firstActive,\n            ['SliderSwitch--secondActive']: secondActive,\n          },\n        )} />\n        <input type=\"hidden\" name={name} value={activeValue} />\n        <SliderSwitchButton\n          active={firstActive}\n          hovered={hoveredOptionId === 0}\n          aria-pressed={firstActive}\n          onClick={this.handleFirstClick}\n          onMouseEnter={this.handleFirstHover}\n          getRootRef={this.firstButton}\n        >\n          {firstOption.name}\n        </SliderSwitchButton>\n        <SliderSwitchButton\n          active={secondActive}\n          hovered={hoveredOptionId === 1}\n          onClick={this.handleSecondClick}\n          onMouseEnter={this.handleSecondHover}\n          getRootRef={this.secondButton}\n        >\n          {secondOption.name}\n        </SliderSwitchButton>\n      </div>\n    );\n  }\n}\n"],"file":"SliderSwitch.js"}