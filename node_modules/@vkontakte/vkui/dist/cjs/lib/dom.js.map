{"version":3,"sources":["../../../src/lib/dom.tsx"],"names":["getDOM","window","canUseDOM","document","DOMContext","useDOM","dom","withDOM","Component","WithDOM","props","blurActiveElement","activeElement","blur"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAgBO,IAAMA,MAAM,GAAG,SAATA,MAAS;AAAA,SAAO;AAC3BC,IAAAA,MAAM,EAAEC,kBAAYD,MAAZ,GAAqB,IADF;AAE3BE,IAAAA,QAAQ,EAAED,kBAAYC,QAAZ,GAAuB;AAFN,GAAP;AAAA,CAAf;;;AAKA,IAAMC,UAAU,gBAAG,0BAAmCJ,MAAM,EAAzC,CAAnB;;;AAEA,IAAMK,MAAM,GAAG,SAATA,MAAS,GAAM;AAC1B,MAAMC,GAAG,GAAG,uBAAWF,UAAX,CAAZ;AACA,SAAO;AACLH,IAAAA,MAAM,EAAEK,GAAG,CAACL,MAAJ,KAAeC,kBAAYD,MAAZ,GAAqB,IAApC,CADH;AAELE,IAAAA,QAAQ,EAAEG,GAAG,CAACH,QAAJ,KAAiBD,kBAAYC,QAAZ,GAAuB,IAAxC;AAFL,GAAP;AAID,CANM;;;;AAQA,SAASI,OAAT,CAAwBC,SAAxB,EAAoE;AACzE,MAAMC,OAAkB,GAAG,SAArBA,OAAqB,CAACC,KAAD,EAAkB;AAC3C,QAAMJ,GAAG,GAAGD,MAAM,EAAlB;AACA,WAAO,qCAAC,SAAD,6BAAeK,KAAf,EAA0BJ,GAA1B,EAAP;AACD,GAHD;;AAIA,SAAOG,OAAP;AACD;;AAEM,SAASE,iBAAT,CAA2BR,QAA3B,EAA2D;AAChE,MAAIA,QAAQ,IAAIA,QAAQ,CAACS,aAAzB,EAAwC;AACrCT,IAAAA,QAAQ,CAACS,aAAV,CAAwCC,IAAxC;AACD;AACF","sourcesContent":["import { createContext, useContext, ComponentType, FC } from 'react';\nimport { canUseDOM } from '@vkontakte/vkjs';\nexport { canUseDOM, canUseEventListeners, onDOMLoaded } from '@vkontakte/vkjs';\n\nexport interface DOMContextInterface {\n  /**\n   * @ignore\n   */\n  window?: Window;\n  /**\n   * @ignore\n   */\n  document?: Document;\n}\n\nexport type DOMProps = DOMContextInterface;\n\nexport const getDOM = () => ({\n  window: canUseDOM ? window : null,\n  document: canUseDOM ? document : null,\n});\n\nexport const DOMContext = createContext<DOMContextInterface>(getDOM());\n\nexport const useDOM = () => {\n  const dom = useContext(DOMContext);\n  return {\n    window: dom.window || (canUseDOM ? window : null),\n    document: dom.document || (canUseDOM ? document : null),\n  };\n};\n\nexport function withDOM<Props>(Component: ComponentType<Props & DOMProps>) {\n  const WithDOM: FC<Props> = (props: Props) => {\n    const dom = useDOM();\n    return <Component {...props} {...dom} />;\n  };\n  return WithDOM;\n}\n\nexport function blurActiveElement(document: Document | undefined) {\n  if (document && document.activeElement) {\n    (document.activeElement as HTMLElement).blur();\n  }\n}\n"],"file":"dom.js"}