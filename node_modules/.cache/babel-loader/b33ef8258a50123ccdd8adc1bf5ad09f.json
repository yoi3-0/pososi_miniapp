{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport React from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { createMasks } from \"./masks\";\nimport { useBrowserInfo } from \"../../hooks/useBrowserInfo\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { System } from \"../../lib/browser\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport Caption from \"../Typography/Caption/Caption\";\n\nvar UsersStack = function UsersStack(props) {\n  var _useBrowserInfo = useBrowserInfo(),\n      system = _useBrowserInfo.system,\n      systemVersion = _useBrowserInfo.systemVersion;\n\n  var platform = usePlatform();\n\n  var photos = props.photos,\n      visibleCount = props.visibleCount,\n      size = props.size,\n      layout = props.layout,\n      children = props.children,\n      restProps = _objectWithoutProperties(props, [\"photos\", \"visibleCount\", \"size\", \"layout\", \"children\"]);\n\n  useIsomorphicLayoutEffect(function () {\n    createMasks();\n  }, []);\n  var othersCount = Math.max(0, photos.length - visibleCount);\n  var canShowOthers = othersCount > 0 && size === 'm';\n  var photosShown = photos.slice(0, visibleCount);\n  var canUseClipPath = true;\n\n  if (system === System.IOS) {\n    canUseClipPath = systemVersion && systemVersion.major >= 12;\n  }\n\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(getClassName('UsersStack', platform), \"UsersStack--size-\".concat(size), \"UsersStack--l-\".concat(layout), {\n      'UsersStack--others': canShowOthers,\n      'UsersStack--simple': !canUseClipPath\n    })\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"UsersStack__photos\",\n    role: \"presentation\"\n  }, photosShown.map(function (photo, i) {\n    return createScopedElement(\"div\", {\n      key: i,\n      vkuiClass: \"UsersStack__photo\",\n      style: {\n        backgroundImage: \"url(\".concat(photo, \")\")\n      }\n    });\n  }), canShowOthers && createScopedElement(Caption, {\n    weight: \"medium\",\n    level: \"1\",\n    vkuiClass: \"UsersStack__photo UsersStack__photo--others\",\n    \"aria-hidden\": \"true\"\n  }, createScopedElement(\"span\", null, \"+\", othersCount))), children && createScopedElement(Caption, {\n    weight: \"regular\",\n    level: \"1\",\n    vkuiClass: \"UsersStack__text\"\n  }, children));\n};\n\nUsersStack.defaultProps = {\n  photos: [],\n  size: 's',\n  visibleCount: 3,\n  layout: 'horizontal'\n};\nexport default /*#__PURE__*/React.memo(UsersStack);","map":{"version":3,"sources":["../../../src/components/UsersStack/UsersStack.tsx"],"names":["UsersStack","system","systemVersion","useBrowserInfo","platform","usePlatform","photos","visibleCount","size","layout","children","restProps","props","useIsomorphicLayoutEffect","createMasks","othersCount","Math","canShowOthers","photosShown","canUseClipPath","System","classNames","getClassName","backgroundImage","React"],"mappings":"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","sourcesContent":["import React, { FC, HTMLAttributes } from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { createMasks } from './masks';\nimport { useBrowserInfo } from '../../hooks/useBrowserInfo';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { System } from '../../lib/browser';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport Caption from '../Typography/Caption/Caption';\n\nexport interface UsersStackProps extends HTMLAttributes<HTMLDivElement> {\n  /**\n   * Массив ссылок на фотографии\n   */\n  photos?: string[];\n  /**\n   * Размер аватарок\n   */\n  size?: 'xs' | 's' | 'm';\n  /**\n   * Вертикальный режим рекомендуется использовать с размером `m`\n   */\n  layout?: 'vertical' | 'horizontal';\n  /**\n   * Количество аватарок, которые будут показаны.\n   * Если в массиве `photos` больше элементов и используется размер `m`, то будет показано количество остальных элементов\n   */\n  visibleCount?: number;\n}\n\nconst UsersStack: FC<UsersStackProps> = (props: UsersStackProps) => {\n  const { system, systemVersion } = useBrowserInfo();\n  const platform = usePlatform();\n  const { photos, visibleCount, size, layout, children, ...restProps } = props;\n\n  useIsomorphicLayoutEffect(() => {\n    createMasks();\n  }, []);\n\n  const othersCount = Math.max(0, photos.length - visibleCount);\n  const canShowOthers = othersCount > 0 && size === 'm';\n\n  const photosShown = photos.slice(0, visibleCount);\n\n  let canUseClipPath = true;\n  if (system === System.IOS) {\n    canUseClipPath = systemVersion && systemVersion.major >= 12;\n  }\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={\n        classNames(\n          getClassName('UsersStack', platform),\n          `UsersStack--size-${size}`,\n          `UsersStack--l-${layout}`,\n          {\n            'UsersStack--others': canShowOthers,\n            'UsersStack--simple': !canUseClipPath,\n          },\n        )\n      }\n    >\n      <div vkuiClass=\"UsersStack__photos\" role=\"presentation\">\n        {photosShown.map((photo, i) => (\n          <div\n            key={i}\n            vkuiClass=\"UsersStack__photo\"\n            style={{ backgroundImage: `url(${photo})` }}\n          />\n        ))}\n\n        {canShowOthers &&\n          <Caption weight=\"medium\" level=\"1\" vkuiClass=\"UsersStack__photo UsersStack__photo--others\" aria-hidden=\"true\">\n            <span>+{othersCount}</span>\n          </Caption>\n        }\n      </div>\n      {children &&\n        <Caption weight=\"regular\" level=\"1\" vkuiClass=\"UsersStack__text\">\n          {children}\n        </Caption>\n      }\n    </div>\n  );\n};\n\nUsersStack.defaultProps = {\n  photos: [],\n  size: 's',\n  visibleCount: 3,\n  layout: 'horizontal',\n};\n\nexport default React.memo(UsersStack);\n"]},"metadata":{},"sourceType":"module"}