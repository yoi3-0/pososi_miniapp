{"ast":null,"code":"function copyWithNavigator(text) {\n  return navigator.clipboard.writeText(text).then(function () {\n    return true;\n  });\n}\n\nfunction copyWithFakeElement(text) {\n  return new Promise(function (resolve, reject) {\n    var textareaEl = document.createElement('textarea');\n    var range = document.createRange();\n    textareaEl.value = text;\n    textareaEl.style.position = 'fixed'; // Avoid scrolling to bottom\n\n    textareaEl.contentEditable = 'true';\n    document.body.appendChild(textareaEl);\n    textareaEl.focus();\n    textareaEl.select();\n    range.selectNodeContents(textareaEl);\n    var selection = window.getSelection();\n\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n\n    textareaEl.setSelectionRange(0, 999999);\n\n    try {\n      var successful = document.execCommand('copy');\n\n      if (successful) {\n        resolve(true);\n      } else {\n        reject(new Error('copy failed'));\n      }\n    } catch (error) {\n      reject(error);\n    }\n\n    if (selection) {\n      selection.removeAllRanges();\n    }\n\n    document.body.removeChild(textareaEl);\n  });\n}\n\nexport function copyTextToClipboard(text) {\n  if (navigator.clipboard) {\n    return copyWithNavigator(text);\n  } else {\n    return copyWithFakeElement(text);\n  }\n}","map":{"version":3,"sources":["../../src/clipboard.ts"],"names":["textareaEl","document","range","selection","window","successful","resolve","reject","navigator","copyWithNavigator","copyWithFakeElement"],"mappings":"AAAA,SAAA,iBAAA,CAAA,IAAA,EAA2D;AACzD,SAAO,SAAS,CAAT,SAAA,CAAA,SAAA,CAAA,IAAA,EAAA,IAAA,CAAyC,YAAA;AAAA,WAAA,IAAA;AAAhD,GAAO,CAAP;AACD;;AAED,SAAA,mBAAA,CAAA,IAAA,EAA6D;AAC3D,SAAO,IAAA,OAAA,CAAY,UAAA,OAAA,EAAA,MAAA,EAAqB;AACtC,QAAMA,UAAU,GAAGC,QAAQ,CAARA,aAAAA,CAAnB,UAAmBA,CAAnB;AACA,QAAMC,KAAK,GAAGD,QAAQ,CAAtB,WAAcA,EAAd;AAEAD,IAAAA,UAAU,CAAVA,KAAAA,GAAAA,IAAAA;AACAA,IAAAA,UAAU,CAAVA,KAAAA,CAAAA,QAAAA,GALsC,OAKtCA,CALsC,CAKD;;AACrCA,IAAAA,UAAU,CAAVA,eAAAA,GAAAA,MAAAA;AAEAC,IAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,UAAAA;AAEAD,IAAAA,UAAU,CAAVA,KAAAA;AACAA,IAAAA,UAAU,CAAVA,MAAAA;AAEAE,IAAAA,KAAK,CAALA,kBAAAA,CAAAA,UAAAA;AAEA,QAAMC,SAAS,GAAGC,MAAM,CAAxB,YAAkBA,EAAlB;;AACA,QAAA,SAAA,EAAe;AACbD,MAAAA,SAAS,CAATA,eAAAA;AACAA,MAAAA,SAAS,CAATA,QAAAA,CAAAA,KAAAA;AACD;;AAEDH,IAAAA,UAAU,CAAVA,iBAAAA,CAAAA,CAAAA,EAAAA,MAAAA;;AAEA,QAAI;AACF,UAAMK,UAAU,GAAGJ,QAAQ,CAARA,WAAAA,CAAnB,MAAmBA,CAAnB;;AACA,UAAA,UAAA,EAAgB;AACdK,QAAAA,OAAO,CAAPA,IAAO,CAAPA;AADF,OAAA,MAEO;AACLC,QAAAA,MAAM,CAAC,IAAA,KAAA,CAAPA,aAAO,CAAD,CAANA;AACD;AANH,KAAA,CAOE,OAAA,KAAA,EAAc;AACdA,MAAAA,MAAM,CAANA,KAAM,CAANA;AACD;;AAED,QAAA,SAAA,EAAe;AACbJ,MAAAA,SAAS,CAATA,eAAAA;AACD;;AAEDF,IAAAA,QAAQ,CAARA,IAAAA,CAAAA,WAAAA,CAAAA,UAAAA;AAtCF,GAAO,CAAP;AAwCD;;AAED,OAAO,SAAA,mBAAA,CAAA,IAAA,EAA6D;AAClE,MAAIO,SAAS,CAAb,SAAA,EAAyB;AACvB,WAAOC,iBAAiB,CAAxB,IAAwB,CAAxB;AADF,GAAA,MAEO;AACL,WAAOC,mBAAmB,CAA1B,IAA0B,CAA1B;AACD;AACF","sourcesContent":["function copyWithNavigator(text: string): Promise<boolean> {\n  return navigator.clipboard.writeText(text).then(() => true);\n}\n\nfunction copyWithFakeElement(text: string): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    const textareaEl = document.createElement('textarea');\n    const range = document.createRange();\n\n    textareaEl.value = text;\n    textareaEl.style.position = 'fixed'; // Avoid scrolling to bottom\n    textareaEl.contentEditable = 'true';\n\n    document.body.appendChild(textareaEl);\n\n    textareaEl.focus();\n    textareaEl.select();\n\n    range.selectNodeContents(textareaEl);\n\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n\n    textareaEl.setSelectionRange(0, 999999);\n\n    try {\n      const successful = document.execCommand('copy');\n      if (successful) {\n        resolve(true);\n      } else {\n        reject(new Error('copy failed'));\n      }\n    } catch (error) {\n      reject(error);\n    }\n\n    if (selection) {\n      selection.removeAllRanges();\n    }\n\n    document.body.removeChild(textareaEl);\n  });\n}\n\nexport function copyTextToClipboard(text: string): Promise<boolean> {\n  if (navigator.clipboard) {\n    return copyWithNavigator(text);\n  } else {\n    return copyWithFakeElement(text);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}