{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport { useContext, useEffect } from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { ModalRootContext, useModalRegistry } from \"../ModalRoot/ModalRootContext\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { withAdaptivity, ViewHeight, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport ModalDismissButton from \"../ModalDismissButton/ModalDismissButton\";\nimport { multiRef } from \"../../lib/utils\";\nimport { ModalType } from \"../ModalRoot/types\";\nimport { getNavId } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nvar warn = warnOnce('ModalPage');\n\nvar ModalPage = function ModalPage(props) {\n  var platform = usePlatform();\n\n  var _useContext = useContext(ModalRootContext),\n      updateModalHeight = _useContext.updateModalHeight;\n\n  var children = props.children,\n      header = props.header,\n      viewWidth = props.viewWidth,\n      viewHeight = props.viewHeight,\n      sizeX = props.sizeX,\n      hasMouse = props.hasMouse,\n      onClose = props.onClose,\n      settlingHeight = props.settlingHeight,\n      dynamicContentHeight = props.dynamicContentHeight,\n      getModalContentRef = props.getModalContentRef,\n      nav = props.nav,\n      restProps = _objectWithoutProperties(props, [\"children\", \"header\", \"viewWidth\", \"viewHeight\", \"sizeX\", \"hasMouse\", \"onClose\", \"settlingHeight\", \"dynamicContentHeight\", \"getModalContentRef\", \"nav\"]);\n\n  useEffect(function () {\n    updateModalHeight();\n  }, [children]);\n  var isDesktop = viewWidth >= ViewWidth.SMALL_TABLET && (hasMouse || viewHeight >= ViewHeight.MEDIUM);\n  var canShowCloseBtn = viewWidth >= ViewWidth.SMALL_TABLET;\n  var modalContext = useContext(ModalRootContext);\n\n  var _useModalRegistry = useModalRegistry(getNavId(props, warn), ModalType.PAGE),\n      refs = _useModalRegistry.refs;\n\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(getClassName('ModalPage', platform), \"ModalPage--sizeX-\".concat(sizeX), {\n      'ModalPage--desktop': isDesktop\n    })\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__in-wrap\",\n    ref: refs.innerElement\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__in\"\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__header\",\n    ref: refs.headerElement\n  }, header), createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__content-wrap\"\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__content\",\n    ref: multiRef(refs.contentElement, getModalContentRef)\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__content-in\"\n  }, children))), canShowCloseBtn && createScopedElement(ModalDismissButton, {\n    onClick: onClose || modalContext.onClose\n  }))));\n};\n\nModalPage.defaultProps = {\n  settlingHeight: 75\n};\nexport default withAdaptivity(ModalPage, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true\n});","map":{"version":3,"sources":["../../../src/components/ModalPage/ModalPage.tsx"],"names":["warn","warnOnce","ModalPage","platform","usePlatform","updateModalHeight","useContext","children","header","viewWidth","viewHeight","sizeX","hasMouse","onClose","settlingHeight","dynamicContentHeight","getModalContentRef","nav","restProps","props","useEffect","isDesktop","ViewWidth","ViewHeight","canShowCloseBtn","modalContext","refs","useModalRegistry","getNavId","ModalType","classNames","getClassName","innerElement","headerElement","multiRef","withAdaptivity"],"mappings":"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","sourcesContent":["import { FC, HTMLAttributes, ReactNode, useContext, useEffect } from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { ModalRootContext, useModalRegistry } from '../ModalRoot/ModalRootContext';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { withAdaptivity, AdaptivityProps, ViewHeight, ViewWidth } from '../../hoc/withAdaptivity';\nimport ModalDismissButton from '../ModalDismissButton/ModalDismissButton';\nimport { Ref } from '../../types';\nimport { multiRef } from '../../lib/utils';\nimport { ModalType } from '../ModalRoot/types';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\n\nexport interface ModalPageProps extends HTMLAttributes<HTMLDivElement>, AdaptivityProps, NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: ReactNode;\n  onClose?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: Ref<HTMLDivElement>;\n}\n\nconst warn = warnOnce('ModalPage');\nconst ModalPage: FC<ModalPageProps> = (props: ModalPageProps) => {\n  const platform = usePlatform();\n  const { updateModalHeight } = useContext(ModalRootContext);\n  const {\n    children,\n    header,\n    viewWidth,\n    viewHeight,\n    sizeX,\n    hasMouse,\n    onClose,\n    settlingHeight,\n    dynamicContentHeight,\n    getModalContentRef,\n    nav,\n    ...restProps\n  } = props;\n\n  useEffect(() => {\n    updateModalHeight();\n  }, [children]);\n\n  const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET && (hasMouse || viewHeight >= ViewHeight.MEDIUM);\n  const canShowCloseBtn = viewWidth >= ViewWidth.SMALL_TABLET;\n\n  const modalContext = useContext(ModalRootContext);\n  const { refs } = useModalRegistry(getNavId(props, warn), ModalType.PAGE);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(getClassName('ModalPage', platform), `ModalPage--sizeX-${sizeX}`, {\n        'ModalPage--desktop': isDesktop,\n      })}\n    >\n      <div vkuiClass=\"ModalPage__in-wrap\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalPage__in\">\n          <div vkuiClass=\"ModalPage__header\" ref={refs.headerElement}>\n            {header}\n          </div>\n\n          <div vkuiClass=\"ModalPage__content-wrap\">\n            <div vkuiClass=\"ModalPage__content\" ref={multiRef<HTMLDivElement>(refs.contentElement, getModalContentRef)}>\n              <div vkuiClass=\"ModalPage__content-in\">\n                {children}\n              </div>\n            </div>\n          </div>\n          {canShowCloseBtn && <ModalDismissButton onClick={onClose || modalContext.onClose} />}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nModalPage.defaultProps = {\n  settlingHeight: 75,\n};\n\nexport default withAdaptivity(ModalPage, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true,\n});\n"]},"metadata":{},"sourceType":"module"}