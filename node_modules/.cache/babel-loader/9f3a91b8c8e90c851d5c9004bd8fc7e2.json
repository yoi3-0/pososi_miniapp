{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport React, { Component } from 'react';\nimport Tappable from \"../Tappable/Tappable\";\nimport PopoutWrapper from \"../PopoutWrapper/PopoutWrapper\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { transitionEvent } from \"../../lib/supportEvents\";\nimport { ANDROID, VKCOM, IOS } from \"../../lib/platform\";\nimport { withPlatform } from \"../../hoc/withPlatform\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport Button from \"../Button/Button\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport Headline from \"../Typography/Headline/Headline\";\nimport Title from \"../Typography/Title/Title\";\nimport Caption from \"../Typography/Caption/Caption\";\nimport ModalDismissButton from \"../ModalDismissButton/ModalDismissButton\";\n\nvar Alert = /*#__PURE__*/function (_Component) {\n  _inherits(Alert, _Component);\n\n  var _super = _createSuper(Alert);\n\n  function Alert(props) {\n    var _this;\n\n    _classCallCheck(this, Alert);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"element\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"transitionFinishTimeout\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onItemClick\", function (item) {\n      return function () {\n        var action = item.action,\n            autoclose = item.autoclose;\n\n        if (autoclose) {\n          _this.setState({\n            closing: true\n          });\n\n          _this.waitTransitionFinish(function (e) {\n            if (!e || e.propertyName === 'opacity') {\n              autoclose && _this.props.onClose();\n              action && action();\n            }\n          });\n        } else {\n          action && action();\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClose\", function () {\n      _this.setState({\n        closing: true\n      });\n\n      _this.waitTransitionFinish(function (e) {\n        if (!e || e.propertyName === 'opacity') {\n          _this.props.onClose();\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopPropagation\", function (e) {\n      e.stopPropagation();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderAction\", function (action, i) {\n      var platform = _this.props.platform;\n\n      if (platform === IOS) {\n        var _action$Component = action.Component,\n            _Component2 = _action$Component === void 0 ? 'button' : _action$Component;\n\n        return createScopedElement(Tappable, {\n          Component: action.href ? 'a' : _Component2,\n          vkuiClass: classNames('Alert__action', \"Alert__action--\".concat(action.mode)),\n          onClick: _this.onItemClick(action),\n          href: action.href,\n          key: \"alert-action-\".concat(i)\n        }, action.title);\n      }\n\n      var mode = platform === ANDROID ? 'tertiary' : action.mode === 'cancel' ? 'secondary' : 'primary';\n      return createScopedElement(Button, {\n        vkuiClass: classNames('Alert__button', \"Alert__button--\".concat(action.mode)),\n        mode: mode,\n        size: \"m\",\n        onClick: _this.onItemClick(action),\n        Component: action.Component,\n        href: action.href,\n        key: \"alert-action-\".concat(i)\n      }, action.title);\n    });\n\n    _this.element = /*#__PURE__*/React.createRef();\n    _this.state = {\n      closing: false\n    };\n    return _this;\n  }\n\n  _createClass(Alert, [{\n    key: \"waitTransitionFinish\",\n    value: function waitTransitionFinish(eventHandler) {\n      if (transitionEvent.supported) {\n        this.element.current.removeEventListener(transitionEvent.name, eventHandler);\n        this.element.current.addEventListener(transitionEvent.name, eventHandler);\n      } else {\n        clearTimeout(this.transitionFinishTimeout);\n        this.transitionFinishTimeout = setTimeout(eventHandler.bind(this), this.props.platform === ANDROID || this.props.platform === VKCOM ? 200 : 300);\n      }\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader(header) {\n      switch (this.props.platform) {\n        case VKCOM:\n          return createScopedElement(Headline, {\n            vkuiClass: \"Alert__header\",\n            weight: \"medium\"\n          }, header);\n\n        case IOS:\n          return createScopedElement(Title, {\n            vkuiClass: \"Alert__header\",\n            weight: \"semibold\",\n            level: \"3\"\n          }, header);\n\n        case ANDROID:\n          return createScopedElement(Title, {\n            vkuiClass: \"Alert__header\",\n            weight: \"medium\",\n            level: \"2\"\n          }, header);\n      }\n    }\n  }, {\n    key: \"renderText\",\n    value: function renderText(text) {\n      switch (this.props.platform) {\n        case VKCOM:\n          return createScopedElement(Caption, {\n            vkuiClass: \"Alert__text\",\n            level: \"1\",\n            weight: \"regular\"\n          }, text);\n\n        case IOS:\n          return createScopedElement(Caption, {\n            vkuiClass: \"Alert__text\",\n            level: \"2\",\n            weight: \"regular\"\n          }, text);\n\n        case ANDROID:\n          return createScopedElement(Headline, {\n            vkuiClass: \"Alert__text\",\n            weight: \"regular\"\n          }, text);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          actions = _this$props.actions,\n          actionsLayout = _this$props.actionsLayout,\n          children = _this$props.children,\n          className = _this$props.className,\n          style = _this$props.style,\n          platform = _this$props.platform,\n          viewWidth = _this$props.viewWidth,\n          text = _this$props.text,\n          header = _this$props.header,\n          restProps = _objectWithoutProperties(_this$props, [\"actions\", \"actionsLayout\", \"children\", \"className\", \"style\", \"platform\", \"viewWidth\", \"text\", \"header\"]);\n\n      var closing = this.state.closing;\n      var resolvedActionsLayout = platform === VKCOM ? 'horizontal' : actionsLayout;\n      var canShowCloseButton = platform === VKCOM || platform === ANDROID && viewWidth >= ViewWidth.SMALL_TABLET;\n      var isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n      return createScopedElement(PopoutWrapper, {\n        className: className,\n        closing: closing,\n        style: style,\n        onClick: this.onClose\n      }, createScopedElement(\"div\", _extends({}, restProps, {\n        ref: this.element,\n        onClick: this.stopPropagation,\n        vkuiClass: classNames(getClassName('Alert', platform), {\n          'Alert--v': resolvedActionsLayout === 'vertical',\n          'Alert--h': resolvedActionsLayout === 'horizontal',\n          'Alert--closing': closing,\n          'Alert--desktop': isDesktop\n        })\n      }), canShowCloseButton && createScopedElement(ModalDismissButton, {\n        onClick: this.onClose\n      }), createScopedElement(\"div\", {\n        vkuiClass: \"Alert__content\"\n      }, hasReactNode(header) && this.renderHeader(header), hasReactNode(text) && this.renderText(text), children), createScopedElement(\"footer\", {\n        vkuiClass: \"Alert__actions\"\n      }, actions.map(this.renderAction))));\n    }\n  }]);\n\n  return Alert;\n}(Component);\n\n_defineProperty(Alert, \"defaultProps\", {\n  actionsLayout: 'horizontal',\n  actions: []\n});\n\nexport default withPlatform(withAdaptivity(Alert, {\n  viewWidth: true\n}));","map":{"version":3,"sources":["../../../src/components/Alert/Alert.tsx"],"names":["Alert","Component","React","closing","actionsLayout","actions","action","autoclose","item","e","eventHandler","transitionEvent","clearTimeout","setTimeout","header","text","platform","classNames","mode","children","className","style","viewWidth","restProps","resolvedActionsLayout","canShowCloseButton","ViewWidth","isDesktop","onClose","getClassName","hasReactNode","withPlatform","withAdaptivity"],"mappings":"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","sourcesContent":["import React, { Component, HTMLAttributes, MouseEventHandler, ReactNode, SyntheticEvent } from 'react';\nimport Tappable from '../Tappable/Tappable';\nimport PopoutWrapper from '../PopoutWrapper/PopoutWrapper';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { transitionEvent } from '../../lib/supportEvents';\nimport { ANDROID, VKCOM, IOS } from '../../lib/platform';\nimport { HasPlatform } from '../../types';\nimport { withPlatform } from '../../hoc/withPlatform';\nimport { withAdaptivity, AdaptivityProps, ViewWidth } from '../../hoc/withAdaptivity';\nimport Button, { ButtonProps } from '../Button/Button';\nimport { hasReactNode } from '../../lib/utils';\nimport Headline from '../Typography/Headline/Headline';\nimport Title from '../Typography/Title/Title';\nimport Caption from '../Typography/Caption/Caption';\nimport ModalDismissButton from '../ModalDismissButton/ModalDismissButton';\n\nexport type AlertActionInterface = AlertProps['actions'][0];\n\nexport interface AlertAction extends Pick<ButtonProps, 'Component' | 'href'> {\n  title: string;\n  action?: VoidFunction;\n  autoclose?: boolean;\n  mode: 'cancel' | 'destructive' | 'default';\n}\n\nexport interface AlertProps extends HTMLAttributes<HTMLElement>, HasPlatform, AdaptivityProps {\n  actionsLayout?: 'vertical' | 'horizontal';\n  actions?: AlertAction[];\n  header?: ReactNode;\n  text?: ReactNode;\n  onClose?: VoidFunction;\n}\n\nexport interface AlertState {\n  closing: boolean;\n}\n\ntype TransitionEndHandler = (e?: TransitionEvent) => void;\n\ntype ItemClickHander = (item: AlertActionInterface) => () => void;\n\nclass Alert extends Component<AlertProps, AlertState> {\n  constructor(props: AlertProps) {\n    super(props);\n    this.element = React.createRef();\n    this.state = {\n      closing: false,\n    };\n  }\n\n  element: React.RefObject<HTMLDivElement>;\n\n  private transitionFinishTimeout: ReturnType<typeof setTimeout>;\n\n  static defaultProps: AlertProps = {\n    actionsLayout: 'horizontal',\n    actions: [],\n  };\n\n  onItemClick: ItemClickHander = (item: AlertActionInterface) => () => {\n    const { action, autoclose } = item;\n\n    if (autoclose) {\n      this.setState({ closing: true });\n      this.waitTransitionFinish((e?: TransitionEvent) => {\n        if (!e || e.propertyName === 'opacity') {\n          autoclose && this.props.onClose();\n          action && action();\n        }\n      });\n    } else {\n      action && action();\n    }\n  };\n\n  onClose: VoidFunction = () => {\n    this.setState({ closing: true });\n    this.waitTransitionFinish((e?: TransitionEvent) => {\n      if (!e || e.propertyName === 'opacity') {\n        this.props.onClose();\n      }\n    });\n  };\n\n  stopPropagation: MouseEventHandler = (e: SyntheticEvent) => {\n    e.stopPropagation();\n  };\n\n  waitTransitionFinish(eventHandler: TransitionEndHandler) {\n    if (transitionEvent.supported) {\n      this.element.current.removeEventListener(transitionEvent.name, eventHandler);\n      this.element.current.addEventListener(transitionEvent.name, eventHandler);\n    } else {\n      clearTimeout(this.transitionFinishTimeout);\n      this.transitionFinishTimeout = setTimeout(eventHandler.bind(this), this.props.platform === ANDROID || this.props.platform === VKCOM ? 200 : 300);\n    }\n  }\n\n  renderHeader(header: ReactNode) {\n    switch (this.props.platform) {\n      case VKCOM:\n        return <Headline vkuiClass=\"Alert__header\" weight=\"medium\">{header}</Headline>;\n      case IOS:\n        return <Title vkuiClass=\"Alert__header\" weight=\"semibold\" level=\"3\">{header}</Title>;\n      case ANDROID:\n        return <Title vkuiClass=\"Alert__header\" weight=\"medium\" level=\"2\">{header}</Title>;\n    }\n  }\n\n  renderText(text: ReactNode) {\n    switch (this.props.platform) {\n      case VKCOM:\n        return <Caption vkuiClass=\"Alert__text\" level=\"1\" weight=\"regular\">{text}</Caption>;\n      case IOS:\n        return <Caption vkuiClass=\"Alert__text\" level=\"2\" weight=\"regular\">{text}</Caption>;\n      case ANDROID:\n        return <Headline vkuiClass=\"Alert__text\" weight=\"regular\">{text}</Headline>;\n    }\n  }\n\n  renderAction = (action: AlertActionInterface, i: number) => {\n    const { platform } = this.props;\n    if (platform === IOS) {\n      const { Component = 'button' } = action;\n      return (\n        <Tappable\n          Component={action.href ? 'a' : Component}\n          vkuiClass={classNames('Alert__action', `Alert__action--${action.mode}`)}\n          onClick={this.onItemClick(action)}\n          href={action.href}\n          key={`alert-action-${i}`}\n        >\n          {action.title}\n        </Tappable>\n      );\n    }\n    const mode: ButtonProps['mode'] = platform === ANDROID\n      ? 'tertiary'\n      : action.mode === 'cancel' ? 'secondary' : 'primary';\n    return (\n      <Button\n        vkuiClass={classNames('Alert__button', `Alert__button--${action.mode}`)}\n        mode={mode}\n        size=\"m\"\n        onClick={this.onItemClick(action)}\n        Component={action.Component}\n        href={action.href}\n        key={`alert-action-${i}`}\n      >\n        {action.title}\n      </Button>\n    );\n  };\n\n  render() {\n    const { actions, actionsLayout, children, className, style, platform, viewWidth, text, header, ...restProps } = this.props;\n    const { closing } = this.state;\n\n    const resolvedActionsLayout: AlertProps['actionsLayout'] = platform === VKCOM ? 'horizontal' : actionsLayout;\n    const canShowCloseButton = platform === VKCOM || platform === ANDROID && viewWidth >= ViewWidth.SMALL_TABLET;\n    const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n\n    return (\n      <PopoutWrapper\n        className={className}\n        closing={closing}\n        style={style}\n        onClick={this.onClose}\n      >\n        <div\n          {...restProps}\n          ref={this.element}\n          onClick={this.stopPropagation}\n          vkuiClass={classNames(getClassName('Alert', platform), {\n            'Alert--v': resolvedActionsLayout === 'vertical',\n            'Alert--h': resolvedActionsLayout === 'horizontal',\n            'Alert--closing': closing,\n            'Alert--desktop': isDesktop,\n          })}\n        >\n          {canShowCloseButton && <ModalDismissButton onClick={this.onClose} />}\n          <div vkuiClass=\"Alert__content\">\n            {hasReactNode(header) && this.renderHeader(header)}\n            {hasReactNode(text) && this.renderText(text)}\n            {children}\n          </div>\n          <footer vkuiClass=\"Alert__actions\">\n            {actions.map(this.renderAction)}\n          </footer>\n        </div>\n      </PopoutWrapper>\n    );\n  }\n}\n\nexport default withPlatform(withAdaptivity(Alert, {\n  viewWidth: true,\n}));\n"]},"metadata":{},"sourceType":"module"}