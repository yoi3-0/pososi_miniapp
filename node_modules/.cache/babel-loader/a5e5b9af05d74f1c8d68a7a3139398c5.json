{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport { useState } from 'react';\nimport { classNames } from \"../../lib/classNames\";\nimport { Icon20Dropdown, Icon24Dropdown } from '@vkontakte/icons';\nimport FormField from \"../FormField/FormField\";\nimport { withAdaptivity, SizeType } from \"../../hoc/withAdaptivity\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport Headline from \"../Typography/Headline/Headline\";\nimport Text from \"../Typography/Text/Text\";\nimport { VKCOM } from \"../../lib/platform\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\n\nvar NativeSelect = function NativeSelect(_ref) {\n  var _classNames;\n\n  var style = _ref.style,\n      _ref$defaultValue = _ref.defaultValue,\n      defaultValue = _ref$defaultValue === void 0 ? '' : _ref$defaultValue,\n      align = _ref.align,\n      placeholder = _ref.placeholder,\n      children = _ref.children,\n      className = _ref.className,\n      getRef = _ref.getRef,\n      getRootRef = _ref.getRootRef,\n      disabled = _ref.disabled,\n      sizeX = _ref.sizeX,\n      sizeY = _ref.sizeY,\n      restProps = _objectWithoutProperties(_ref, [\"style\", \"defaultValue\", \"align\", \"placeholder\", \"children\", \"className\", \"getRef\", \"getRootRef\", \"disabled\", \"sizeX\", \"sizeY\"]);\n\n  var platform = usePlatform();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      notSelected = _useState4[0],\n      setNotSelected = _useState4[1];\n\n  var _useEnsuredControl = useEnsuredControl(restProps, {\n    defaultValue: defaultValue\n  }),\n      _useEnsuredControl2 = _slicedToArray(_useEnsuredControl, 2),\n      value = _useEnsuredControl2[0],\n      onChange = _useEnsuredControl2[1];\n\n  var selectRef = useExternRef(getRef);\n  useIsomorphicLayoutEffect(function () {\n    var selectedOption = selectRef.current.options[selectRef.current.selectedIndex];\n\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setNotSelected(selectedOption.value === '' && placeholder != null);\n    }\n  }, [value, children]);\n  var TypographyComponent = platform === VKCOM || sizeY === SizeType.COMPACT ? Text : Headline;\n  return createScopedElement(FormField, {\n    Component: \"label\",\n    vkuiClass: classNames(getClassName('Select', platform), (_classNames = {}, _defineProperty(_classNames, 'Select--not-selected', notSelected), _defineProperty(_classNames, \"Select--align-\".concat(align), !!align), _defineProperty(_classNames, \"Select--sizeX--\".concat(sizeX), !!sizeX), _defineProperty(_classNames, \"Select--sizeY--\".concat(sizeY), !!sizeY), _classNames)),\n    className: className,\n    style: style,\n    getRootRef: getRootRef,\n    disabled: disabled,\n    after: sizeY === SizeType.COMPACT ? createScopedElement(Icon20Dropdown, null) : createScopedElement(Icon24Dropdown, null)\n  }, createScopedElement(\"select\", _extends({}, restProps, {\n    disabled: disabled,\n    vkuiClass: \"Select__el\",\n    onChange: onChange,\n    value: value,\n    ref: selectRef\n  }), placeholder && createScopedElement(\"option\", {\n    value: \"\"\n  }, placeholder), children), createScopedElement(TypographyComponent, {\n    Component: \"div\",\n    weight: \"regular\",\n    vkuiClass: \"Select__container\"\n  }, createScopedElement(\"span\", {\n    vkuiClass: \"Select__title\"\n  }, title)));\n};\n\nexport default withAdaptivity(NativeSelect, {\n  sizeX: true,\n  sizeY: true\n});","map":{"version":3,"sources":["../../../src/components/NativeSelect/NativeSelect.tsx"],"names":["NativeSelect","style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY","restProps","platform","usePlatform","title","setTitle","useState","notSelected","setNotSelected","value","onChange","useEnsuredControl","selectRef","useExternRef","useIsomorphicLayoutEffect","selectedOption","TypographyComponent","SizeType","classNames","getClassName","withAdaptivity"],"mappings":"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","sourcesContent":["import { FC, SelectHTMLAttributes, useState } from 'react';\nimport { classNames } from '../../lib/classNames';\nimport { Icon20Dropdown, Icon24Dropdown } from '@vkontakte/icons';\nimport FormField from '../FormField/FormField';\nimport { HasAlign, HasRef, HasRootRef } from '../../types';\nimport { withAdaptivity, AdaptivityProps, SizeType } from '../../hoc/withAdaptivity';\nimport { getClassName } from '../../helpers/getClassName';\nimport Headline from '../Typography/Headline/Headline';\nimport Text from '../Typography/Text/Text';\nimport { VKCOM } from '../../lib/platform';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { useEnsuredControl } from '../../hooks/useEnsuredControl';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { usePlatform } from '../../hooks/usePlatform';\n\nexport interface NativeSelectProps extends\n  SelectHTMLAttributes<HTMLSelectElement>,\n  HasRef<HTMLSelectElement>,\n  HasRootRef<HTMLLabelElement>,\n  HasAlign,\n  AdaptivityProps {\n  placeholder?: string;\n}\n\nexport interface SelectState {\n  value?: SelectHTMLAttributes<HTMLSelectElement>['value'];\n  title?: string;\n  notSelected?: boolean;\n}\n\nconst NativeSelect: FC<NativeSelectProps> = ({\n  style, defaultValue = '', align, placeholder, children,\n  className, getRef, getRootRef, disabled, sizeX, sizeY,\n  ...restProps\n}) => {\n  const platform = usePlatform();\n  const [title, setTitle] = useState('');\n  const [notSelected, setNotSelected] = useState(false);\n  const [value, onChange] = useEnsuredControl(restProps, { defaultValue });\n  const selectRef = useExternRef(getRef);\n  useIsomorphicLayoutEffect(() => {\n    const selectedOption = selectRef.current.options[selectRef.current.selectedIndex];\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setNotSelected(selectedOption.value === '' && placeholder != null);\n    }\n  }, [value, children]);\n\n  const TypographyComponent = platform === VKCOM || sizeY === SizeType.COMPACT ? Text : Headline;\n\n  return (\n    <FormField\n      Component=\"label\"\n      vkuiClass={classNames(getClassName('Select', platform), {\n        ['Select--not-selected']: notSelected,\n        [`Select--align-${align}`]: !!align,\n        [`Select--sizeX--${sizeX}`]: !!sizeX,\n        [`Select--sizeY--${sizeY}`]: !!sizeY,\n      })}\n      className={className}\n      style={style}\n      getRootRef={getRootRef}\n      disabled={disabled}\n      after={sizeY === SizeType.COMPACT ? <Icon20Dropdown /> : <Icon24Dropdown />}\n    >\n      <select\n        {...restProps}\n        disabled={disabled}\n        vkuiClass=\"Select__el\"\n        onChange={onChange}\n        value={value}\n        ref={selectRef}\n      >\n        {placeholder && <option value=\"\">{placeholder}</option>}\n        {children}\n      </select>\n      <TypographyComponent Component=\"div\" weight=\"regular\" vkuiClass=\"Select__container\">\n        <span vkuiClass=\"Select__title\">{title}</span>\n      </TypographyComponent>\n    </FormField>\n  );\n};\n\nexport default withAdaptivity(NativeSelect, {\n  sizeX: true,\n  sizeY: true,\n});\n"]},"metadata":{},"sourceType":"module"}