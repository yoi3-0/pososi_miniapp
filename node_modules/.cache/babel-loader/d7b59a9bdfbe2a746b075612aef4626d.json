{"ast":null,"code":"import { detectIOS } from '@vkontakte/vkjs';\nexport var System;\n\n(function (System) {\n  System[\"IOS\"] = \"ios\";\n  System[\"UNKNOWN\"] = \"\";\n})(System || (System = {}));\n\nvar memoized = {};\nexport function computeBrowserInfo() {\n  var userAgent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n  if (memoized[userAgent]) {\n    return memoized[userAgent];\n  }\n\n  var systemVersion = null;\n  var system = System.UNKNOWN;\n\n  var _detectIOS = detectIOS(userAgent),\n      isIOS = _detectIOS.isIOS,\n      iosMajor = _detectIOS.iosMajor,\n      iosMinor = _detectIOS.iosMinor;\n\n  if (isIOS) {\n    system = System.IOS;\n    systemVersion = {\n      major: iosMajor,\n      minor: iosMinor\n    };\n  }\n\n  var browserInfo = {\n    userAgent: userAgent,\n    system: system,\n    systemVersion: systemVersion\n  };\n  memoized[userAgent] = browserInfo;\n  return browserInfo;\n}","map":{"version":3,"sources":["../../src/lib/browser.ts"],"names":["System","memoized","userAgent","systemVersion","system","isIOS","iosMajor","iosMinor","detectIOS","major","minor","browserInfo"],"mappings":"AACA,SAAA,SAAA,QAAA,iBAAA;AAEA,OAAA,IAAA,MAAA;;WAAYA,M;AAAAA,EAAAA,M,OAAAA,G,KAAAA;AAAAA,EAAAA,M,WAAAA,G,EAAAA;GAAAA,M,KAAAA,M;;AAWZ,IAAMC,QAA0C,GAAhD,EAAA;AAEA,OAAO,SAAA,kBAAA,GAAyD;AAAA,MAA7BC,SAA6B,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAjB,EAAiB;;AAC9D,MAAID,QAAQ,CAAZ,SAAY,CAAZ,EAAyB;AACvB,WAAOA,QAAQ,CAAf,SAAe,CAAf;AACD;;AAED,MAAIE,aAA6B,GAAjC,IAAA;AACA,MAAIC,MAAM,GAAGJ,MAAM,CAAnB,OAAA;;AAN8D,MAAA,UAAA,GAQxBQ,SAAS,CARe,SAQf,CARe;AAAA,MAQtDH,KARsD,GAAA,UAAA,CAAA,KAAA;AAAA,MAQ/CC,QAR+C,GAAA,UAAA,CAAA,QAAA;AAAA,MAQrCC,QARqC,GAAA,UAAA,CAAA,QAAA;;AAU9D,MAAA,KAAA,EAAW;AACTH,IAAAA,MAAM,GAAGJ,MAAM,CAAfI,GAAAA;AACAD,IAAAA,aAAa,GAAG;AACdM,MAAAA,KAAK,EADS,QAAA;AAEdC,MAAAA,KAAK,EAAEH;AAFO,KAAhBJ;AAID;;AAED,MAAMQ,WAAwB,GAAG;AAC/BT,IAAAA,SAAS,EADsB,SAAA;AAE/BE,IAAAA,MAAM,EAFyB,MAAA;AAG/BD,IAAAA,aAAa,EAAbA;AAH+B,GAAjC;AAMAF,EAAAA,QAAQ,CAARA,SAAQ,CAARA,GAAAA,WAAAA;AAEA,SAAA,WAAA;AACD","sourcesContent":["import { Version } from '../types';\nimport { detectIOS } from '@vkontakte/vkjs';\n\nexport enum System {\n  IOS = 'ios',\n  UNKNOWN = '',\n}\n\nexport interface BrowserInfo {\n  userAgent: string;\n  system: System;\n  systemVersion: Version | null;\n}\n\nconst memoized: { [index: string]: BrowserInfo } = {};\n\nexport function computeBrowserInfo(userAgent = ''): BrowserInfo {\n  if (memoized[userAgent]) {\n    return memoized[userAgent];\n  }\n\n  let systemVersion: Version | null = null;\n  let system = System.UNKNOWN;\n\n  const { isIOS, iosMajor, iosMinor } = detectIOS(userAgent);\n\n  if (isIOS) {\n    system = System.IOS;\n    systemVersion = {\n      major: iosMajor,\n      minor: iosMinor,\n    };\n  }\n\n  const browserInfo: BrowserInfo = {\n    userAgent,\n    system,\n    systemVersion,\n  };\n\n  memoized[userAgent] = browserInfo;\n\n  return browserInfo;\n}\n"]},"metadata":{},"sourceType":"module"}