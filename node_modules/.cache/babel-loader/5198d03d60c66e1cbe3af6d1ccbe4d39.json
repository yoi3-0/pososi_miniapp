{"ast":null,"code":"import { createScopedElement } from \"./jsxRuntime\";\nimport { createContext } from 'react';\nimport { platform } from \"./platform\";\nimport { computeBrowserInfo } from \"./browser\";\nimport { DOMContext, getDOM } from \"../lib/dom\";\nexport var SSRContext = /*#__PURE__*/createContext({\n  platform: null,\n  userAgent: '',\n  browserInfo: undefined\n});\nexport var SSRWrapper = function SSRWrapper(props) {\n  var userAgent = props.userAgent,\n      browserInfo = props.browserInfo,\n      children = props.children;\n\n  if (!browserInfo && userAgent) {\n    browserInfo = computeBrowserInfo(userAgent);\n  } // TODO: Каждый раз создаётся новый объект для контекста – плохо\n\n\n  var contextValue = {\n    platform: platform(browserInfo),\n    browserInfo: browserInfo,\n    userAgent: userAgent\n  }; // TODO: move to state, and update in effect?\n\n  var dom = getDOM();\n  return createScopedElement(SSRContext.Provider, {\n    value: contextValue\n  }, createScopedElement(DOMContext.Provider, {\n    value: dom\n  }, children));\n};","map":{"version":3,"sources":["../../src/lib/SSR.tsx"],"names":["SSRContext","createContext","platform","userAgent","browserInfo","undefined","SSRWrapper","children","props","computeBrowserInfo","contextValue","dom","getDOM"],"mappings":";AAAA,SAAA,aAAA,QAAA,OAAA;AACA,SAAA,QAAA,QAAA,YAAA;AACA,SAAA,kBAAA,QAAA,WAAA;AACA,SAAA,UAAA,EAAA,MAAA,QAAA,YAAA;AAQA,OAAO,IAAMA,UAAU,GAAA,aAAGC,aAAa,CAAsB;AAC3DC,EAAAA,QAAQ,EADmD,IAAA;AAE3DC,EAAAA,SAAS,EAFkD,EAAA;AAG3DC,EAAAA,WAAW,EAAEC;AAH8C,CAAtB,CAAhC;AAWP,OAAO,IAAMC,UAA+B,GAAG,SAAlCA,UAAkC,CAAA,KAAA,EAAW;AAAA,MAClDH,SADkD,GACbK,KADa,CAAA,SAAA;AAAA,MACvCJ,WADuC,GACbI,KADa,CAAA,WAAA;AAAA,MAC1BD,QAD0B,GACbC,KADa,CAAA,QAAA;;AAGxD,MAAI,CAAA,WAAA,IAAJ,SAAA,EAA+B;AAC7BJ,IAAAA,WAAW,GAAGK,kBAAkB,CAAhCL,SAAgC,CAAhCA;AAJsD,GAAA,CAOxD;;;AACA,MAAMM,YAAY,GAAG;AACnBR,IAAAA,QAAQ,EAAEA,QAAQ,CADC,WACD,CADC;AAEnBE,IAAAA,WAAW,EAFQ,WAAA;AAGnBD,IAAAA,SAAS,EAATA;AAHmB,GAArB,CARwD,CAcxD;;AACA,MAAMQ,GAAG,GAAGC,MAAZ,EAAA;AAEA,SACE,mBAAA,CAAC,UAAD,CAAA,QAAA,EAAA;AAAqB,IAAA,KAAK,EAAEF;AAA5B,GAAA,EACE,mBAAA,CAAC,UAAD,CAAA,QAAA,EAAA;AAAqB,IAAA,KAAK,EAAEC;AAA5B,GAAA,EAFJ,QAEI,CADF,CADF;AAjBK,CAAA","sourcesContent":["import { createContext, FC } from 'react';\nimport { PlatformType, platform } from './platform';\nimport { BrowserInfo, computeBrowserInfo } from './browser';\nimport { DOMContext, getDOM } from '../lib/dom';\n\nexport interface SSRContextInterface {\n  platform: PlatformType;\n  userAgent?: string;\n  browserInfo?: BrowserInfo;\n}\n\nexport const SSRContext = createContext<SSRContextInterface>({\n  platform: null,\n  userAgent: '',\n  browserInfo: undefined,\n});\n\nexport interface SSRWrapperProps {\n  userAgent?: string;\n  browserInfo?: BrowserInfo;\n}\n\nexport const SSRWrapper: FC<SSRWrapperProps> = (props) => {\n  let { userAgent, browserInfo, children } = props;\n\n  if (!browserInfo && userAgent) {\n    browserInfo = computeBrowserInfo(userAgent);\n  }\n\n  // TODO: Каждый раз создаётся новый объект для контекста – плохо\n  const contextValue = {\n    platform: platform(browserInfo),\n    browserInfo,\n    userAgent,\n  };\n\n  // TODO: move to state, and update in effect?\n  const dom = getDOM();\n\n  return (\n    <SSRContext.Provider value={contextValue}>\n      <DOMContext.Provider value={dom}>\n        {children}\n      </DOMContext.Provider>\n    </SSRContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}