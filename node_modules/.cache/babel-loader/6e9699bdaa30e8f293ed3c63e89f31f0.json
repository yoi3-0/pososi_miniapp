{"ast":null,"code":"import { useCallback, useEffect, useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from \"../lib/useIsomorphicLayoutEffect\";\nimport { canUseDOM } from \"../lib/dom\";\nexport function useTimeout(cb, duration) {\n  var options = useRef({\n    cb: cb,\n    duration: duration\n  });\n  useIsomorphicLayoutEffect(function () {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n  var timeout = useRef();\n  var clear = useCallback(function () {\n    return canUseDOM && clearTimeout(timeout.current);\n  }, []);\n  var set = useCallback(function () {\n    clear();\n\n    if (canUseDOM) {\n      timeout.current = setTimeout(function () {\n        var cb = options.current.cb;\n        typeof cb === 'function' && cb();\n      }, options.current.duration);\n    }\n  }, []);\n  useEffect(function () {\n    return clear;\n  }, []);\n  return {\n    set: set,\n    clear: clear\n  };\n}","map":{"version":3,"sources":["../../src/hooks/useTimeout.ts"],"names":["options","useRef","cb","duration","useIsomorphicLayoutEffect","timeout","clear","useCallback","canUseDOM","clearTimeout","set","setTimeout","useEffect"],"mappings":"AAAA,SAAA,WAAA,EAAA,SAAA,EAAA,MAAA,QAAA,OAAA;AACA,SAAA,yBAAA,QAAA,kCAAA;AACA,SAAA,SAAA,QAAA,YAAA;AAEA,OAAO,SAAA,UAAA,CAAA,EAAA,EAAA,QAAA,EAAqD;AAC1D,MAAMA,OAAO,GAAGC,MAAM,CAAC;AAAEC,IAAAA,EAAE,EAAJ,EAAA;AAAMC,IAAAA,QAAQ,EAARA;AAAN,GAAD,CAAtB;AACAC,EAAAA,yBAAyB,CAAC,YAAM;AAC9BJ,IAAAA,OAAO,CAAPA,OAAAA,CAAAA,EAAAA,GAAAA,EAAAA;AACAA,IAAAA,OAAO,CAAPA,OAAAA,CAAAA,QAAAA,GAAAA,QAAAA;AAFuB,GAAA,EAGtB,CAAA,EAAA,EAHHI,QAGG,CAHsB,CAAzBA;AAKA,MAAMC,OAAO,GAAGJ,MAAhB,EAAA;AACA,MAAMK,KAAK,GAAGC,WAAW,CAAC,YAAA;AAAA,WAAMC,SAAS,IAAIC,YAAY,CAACJ,OAAO,CAAvC,OAA+B,CAA/B;AAAD,GAAA,EAAzB,EAAyB,CAAzB;AACA,MAAMK,GAAG,GAAGH,WAAW,CAAC,YAAM;AAC5BD,IAAAA,KAAK;;AACL,QAAA,SAAA,EAAe;AACbD,MAAAA,OAAO,CAAPA,OAAAA,GAAkBM,UAAU,CAAC,YAAM;AAAA,YACzBT,EADyB,GAClBF,OAAO,CADW,OAClBA,CADkB,EAAA;AAEjC,eAAA,EAAA,KAAA,UAAA,IAA4BE,EAA5B,EAAA;AAF0B,OAAA,EAGzBF,OAAO,CAAPA,OAAAA,CAHHK,QAA4B,CAA5BA;AAID;AAPoB,GAAA,EAAvB,EAAuB,CAAvB;AASAO,EAAAA,SAAS,CAAC,YAAA;AAAA,WAAA,KAAA;AAAD,GAAA,EAATA,EAAS,CAATA;AAEA,SAAO;AAAEF,IAAAA,GAAG,EAAL,GAAA;AAAOJ,IAAAA,KAAK,EAALA;AAAP,GAAP;AACD","sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\nimport { canUseDOM } from '../lib/dom';\n\nexport function useTimeout(cb: () => any, duration: number) {\n  const options = useRef({ cb, duration });\n  useIsomorphicLayoutEffect(() => {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n\n  const timeout = useRef<ReturnType<typeof setTimeout>>();\n  const clear = useCallback(() => canUseDOM && clearTimeout(timeout.current), []);\n  const set = useCallback(() => {\n    clear();\n    if (canUseDOM) {\n      timeout.current = setTimeout(() => {\n        const { cb } = options.current;\n        typeof cb === 'function' && cb();\n      }, options.current.duration);\n    }\n  }, []);\n  useEffect(() => clear, []);\n\n  return { set, clear };\n}\n"]},"metadata":{},"sourceType":"module"}