{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yoi3/Desktop/pososi/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yoi3/Desktop/pososi/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/yoi3/Desktop/pososi/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import bridge from'@vkontakte/vk-bridge';import{View,ScreenSpinner,AdaptivityProvider,AppRoot,Epic,Tabbar,TabbarItem}from'@vkontakte/vkui';import'@vkontakte/vkui/dist/vkui.css';import Home from'./panels/Home';import Persik from'./panels/Persik';import{Icon28NewsfeedOutline,Icon28ServicesOutline}from\"@vkontakte/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState('profile'),_useState2=_slicedToArray(_useState,2),activePanel=_useState2[0],setActivePanel=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),fetchedUser=_useState4[0],setUser=_useState4[1];var _React$useState=React.useState('profile'),_React$useState2=_slicedToArray(_React$useState,2),activeStory=_React$useState2[0],setActiveStory=_React$useState2[1];var _useState5=useState(/*#__PURE__*/_jsx(ScreenSpinner,{size:\"large\"})),_useState6=_slicedToArray(_useState5,2),popout=_useState6[0],setPopout=_useState6[1];var onStoryChange=function onStoryChange(e){setActiveStory(e.currentTarget.dataset.story);setActivePanel(e.currentTarget.dataset.story);};useEffect(function(){bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type==='VKWebAppUpdateConfig'){var schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);}});function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return bridge.send('VKWebAppGetUserInfo');case 2:user=_context.sent;setUser(user);setPopout(null);case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var go=function go(e){setActivePanel(e.currentTarget.dataset.to);};return/*#__PURE__*/_jsx(AdaptivityProvider,{children:/*#__PURE__*/_jsxs(AppRoot,{children:[/*#__PURE__*/_jsxs(View,{activePanel:activePanel,popout:popout,children:[/*#__PURE__*/_jsx(Home,{id:\"profile\",fetchedUser:fetchedUser,go:go}),/*#__PURE__*/_jsx(Persik,{id:\"persik\",go:go})]}),/*#__PURE__*/_jsx(Epic,{activeStory:activeStory,tabbar:/*#__PURE__*/_jsxs(Tabbar,{children:[/*#__PURE__*/_jsx(TabbarItem,{onClick:onStoryChange,selected:activeStory==='persik',\"data-story\":\"persik\",text:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\",children:/*#__PURE__*/_jsx(Icon28NewsfeedOutline,{})}),/*#__PURE__*/_jsx(TabbarItem,{onClick:onStoryChange,selected:activeStory==='profile',\"data-story\":\"profile\",text:\"\\u0421\\u0435\\u0440\\u0432\\u0438\\u0441\\u044B\",children:/*#__PURE__*/_jsx(Icon28ServicesOutline,{})})]})})]})});};export default App;","map":{"version":3,"sources":["/Users/yoi3/Desktop/pososi/src/App.js"],"names":["React","useState","useEffect","bridge","View","ScreenSpinner","AdaptivityProvider","AppRoot","Epic","Tabbar","TabbarItem","Home","Persik","Icon28NewsfeedOutline","Icon28ServicesOutline","App","activePanel","setActivePanel","fetchedUser","setUser","activeStory","setActiveStory","popout","setPopout","onStoryChange","e","currentTarget","dataset","story","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","send","user","go","to"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport {View, ScreenSpinner, AdaptivityProvider, AppRoot, Epic, Tabbar, TabbarItem} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Persik from './panels/Persik';\nimport {Icon28NewsfeedOutline, Icon28ServicesOutline} from \"@vkontakte/icons\";\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('profile');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [activeStory, setActiveStory] = React.useState('profile');\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\tconst onStoryChange = (e) => {\n\t\tsetActiveStory(e.currentTarget.dataset.story)\n\t\tsetActivePanel(e.currentTarget.dataset.story)\n\t};\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\treturn (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t\t\t<Home id='profile' fetchedUser={fetchedUser} go={go} />\n\t\t\t\t\t<Persik id='persik' go={go} />\n\t\t\t\t</View>\n\t\t\t\t<Epic activeStory={activeStory} tabbar={\n\t\t\t\t\t<Tabbar>\n\t\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\t\tonClick={onStoryChange}\n\t\t\t\t\t\t\tselected={activeStory === 'persik'}\n\t\t\t\t\t\t\tdata-story=\"persik\"\n\t\t\t\t\t\t\ttext=\"Новости\"\n\t\t\t\t\t\t><Icon28NewsfeedOutline /></TabbarItem>\n\t\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\t\tonClick={onStoryChange}\n\t\t\t\t\t\t\tselected={activeStory === 'profile'}\n\t\t\t\t\t\t\tdata-story=\"profile\"\n\t\t\t\t\t\t\ttext=\"Сервисы\"\n\t\t\t\t\t\t><Icon28ServicesOutline/></TabbarItem>\n\t\t\t\t\t</Tabbar>\n\t\t\t\t}>\n\t\t\t\t</Epic>\n\t\t\t</AppRoot>\n\t\t</AdaptivityProvider>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}